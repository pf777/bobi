# 如何打包成 APK

**本项目用途**：封装**任意普通移动网页地址**（不需要 PWA），打开 App 即在内嵌浏览器里打开该网址。

**先改好要封装的网址**：编辑 `app/src/main/res/values/strings.xml`，把 `default_url` 改成你的网页地址（如 `https://你的网站.com`），保存后再按下面任一方式打包。

---

## 方法一：无 Android Studio，用 GitHub 云端构建（推荐）

**不需要装 Android Studio**，只要把项目推到 GitHub，就能在云端自动打出 APK，然后下载安装。

1. **把项目推到 GitHub**
   - 在 [GitHub](https://github.com) 新建一个仓库（例如 `FastLink`）。
   - 在本地项目目录 `d:\Android` 里执行：
   ```powershell
   git init
   git add .
   git commit -m "init"
   git remote add origin https://github.com/你的用户名/FastLink.git
   git push -u origin main
   ```
   （如果仓库默认分支是 `master`，把上面最后一句改成 `git push -u origin master`。）

2. **等自动构建**
   - 打开仓库网页，点顶栏 **Actions**。
   - 会看到 **Build APK** 工作流在跑，等它变绿完成（约几分钟）。

3. **下载 APK**
   - 点进这次运行（例如 **Build APK #1**）→ 若左侧出现绿色勾表示成功。
   - 页面往下滚到 **Artifacts** 区域，会看到 **app-debug**。
   - 点 **app-debug** 下载 zip，解压后得到 **app-debug.apk**，就是可安装的 App。

之后每次 `git push` 到 `main`/`master` 都会自动重新打一版 APK；也可以在 Actions 里点 **Build APK** → **Run workflow** 手动触发一次。

---

## 方法二：用 Android Studio

1. **打开项目**
   - 启动 Android Studio，选择 **File → Open**，选中文件夹 `d:\Android`，确定。

2. **等待同步**
   - 首次打开会下载 Gradle 和依赖，等底部进度条和 “Gradle sync finished” 完成。

3. **打 Debug 包（测试用）**
   - 菜单 **Build → Build Bundle(s) / APK(s) → Build APK(s)**。
   - 完成后右下角会提示 **Locate**，点开即可看到 APK。
   - 或到目录：`d:\Android\app\build\outputs\apk\debug\app-debug.apk`

4. **打 Release 包（正式发布用）**
   - 菜单 **Build → Generate Signed Bundle / APK...**。
   - 选 **APK** → Next。
   - 若没有密钥：点 **Create new**，填路径、密码、别名等，再 Next。
   - 选 **release**，勾选 **V1**（或 V1+V2），Finish。
   - Release APK 在：`d:\Android\app\build\outputs\apk\release\app-release.apk`

---

## 方法三：命令行打包

前提：**至少用 Android Studio 打开过一次项目**，让 IDE 生成 `gradlew` 和 `gradle-wrapper.jar`。

在 **PowerShell 或 CMD** 里进入项目目录后执行：

```powershell
cd d:\Android

# 打 Debug 包（测试安装）
.\gradlew assembleDebug

# 打 Release 包（需先配置签名，见下方）
.\gradlew assembleRelease
```

- **Debug APK 位置**：`app\build\outputs\apk\debug\app-debug.apk`
- **Release APK 位置**：`app\build\outputs\apk\release\app-release.apk`

### Release 签名配置（命令行打正式包时用）

在 `app/build.gradle.kts` 的 `android { }` 里增加 `signingConfigs`，并在 `buildTypes.release` 里使用。若已用 Android Studio 的 **Generate Signed APK** 生成过密钥，可把同一密钥路径、别名、密码配到这里，再执行 `.\gradlew assembleRelease`。

---

## 类似的免费打包方式（都不用 Android Studio）

| 方式 | 说明 | 适合谁 |
|------|------|--------|
| **GitHub Actions**（本项目已配好） | 代码推到 GitHub 后自动打 APK，在 Actions 里下载 | 有 GitHub 账号、会 `git push` |
| **GitLab CI** | 和 GitHub Actions 类似，把项目放到 GitLab，用 `.gitlab-ci.yml` 在云端执行 `gradlew assembleDebug`，打出的 APK 作为制品下载 | 习惯用 GitLab 的人 |
| **Codemagic** | [codemagic.io](https://codemagic.io) 有免费额度，连 GitHub/GitLab 仓库后自动构建 Android，可下载 APK | 想要可视化构建、自动分发的人 |
| **Bitrise** | [bitrise.io](https://bitrise.io) 免费层可建 Android 流水线，连仓库后云端打 APK | 同上 |
| **仅装 Android 命令行工具** | 不装 Android Studio，只装 [Android 命令行工具](https://developer.android.com/studio#command-line-tools-only) + JDK 17，本机用 `gradlew assembleDebug` 打 APK（需项目里已有 gradlew，或用 GitHub Actions 跑一次后把生成的 gradlew 拷到本地） | 不想用云端、愿意在本机配环境的人 |
| **Docker** | 用带 Android SDK 的镜像（如 `mindrunner/docker-android-sdk`）在容器里执行 `./gradlew assembleDebug`，把生成的 APK 拷出来 | 会用 Docker 的人 |

**说明**：上面都是「把现有 Android 项目打成 APK」的方式，全是免费或免费额度内可用。  
**本项目就是封装普通移动网页地址**，不需要 PWA，改 `app/src/main/res/values/strings.xml` 里的 `default_url` 为你的网址即可。  
若你已有 PWA 站点，也可用 PWABuilder、Bubblewrap 等把 PWA 打成 APK；普通网页用本仓库即可。

---

## 安装到手机

- **USB**：手机开启开发者选项和 USB 调试，用数据线连电脑，Android Studio 里点 Run，或命令行执行 `.\gradlew installDebug`。
- **拷贝 APK**：把 `app-debug.apk` 或 `app-release.apk` 拷到手机，在文件管理里点击安装（需允许“未知来源”）。
